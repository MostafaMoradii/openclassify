{% extends "theme::layouts/default" %}

{% block content %}
    {% include 'visiosoft.module.classifieds::new-classified/partials/steps' with {'step': 'preview'} %}

    <div class="pt-5">
        <p class="preview-paragraph">
            {{ trans('visiosoft.module.classifieds::field.preview_text.part_1') }}
            <br>
            {{ trans('visiosoft.module.classifieds::field.preview_text.part_2') }}
        </p>
        {% if auth_check() and auth_user().hasRole('admin') %}
            <p class="text-muted text-center mb-0">
                <i class="fa fa-exclamation-triangle"></i>
                {{ trans('visiosoft.module.classifieds::message.disabled_detailed_options_for_admin_role') }}
            </p>
        {% endif %}
    </div>
    
    <div class="preview-actions text-center">
        {% if isActive('packages') and setting_value('visiosoft.module.packages::move_the_buy_package_to_the_end') and (auth_user().isAdmin or not auth_user().hasPermission('visiosoft.module.packages::packages.no_read')) %}
            {% set continueLink = url_route('visiosoft.module.packages::add_package', [classified.id]) %}
        {% elseif isActive('dopings') %}
            {% set continueLink = url_route('add_doping', [classified.id]) %}
        {% else %}
            {% set continueLink = url_route('classified_detail_seo', [classified.slug, classified.id]) %}
        {% endif %}
        {% if isActive('shipping') and classified.is_get_classified.getValue() %}
            {{ addBlock('new-create/preview/actions',{'classified_id':classified.id})|raw }}
        {% endif %}
        <a href="{{ url_route('visiosoft.module.classifieds::edit_classified', [classified.id]) }}"
           class="btn preview-edit shadow-sm border">
            {{ trans('visiosoft.module.classifieds::field.edit') }}
        </a>
        <a href="{{ continueLink }}" class="btn preview-continue shadow-sm ml-4">
            {{ trans('visiosoft.module.classifieds::field.continue') }}
        </a>
    </div>
    <div class="preview-wrapper position-relative">
        {% include "visiosoft.module.classifieds::new-classified/preview/partials/preview-window" %}
        <div class="preview-overlay position-absolute"></div>
    </div>
    <div class="preview-actions text-center">
        {% if isActive('shipping') %}
            <a href="{{ url_route('visiosoft.module.shipping::create_shipping',{'id':classified.id}) }}"
               class="btn btn-outline-primary shadow-sm mr-4">
                {{ trans('visiosoft.module.shipping::button.create_shipping_information') }}
            </a>
        {% endif %}

        <a href="{{ url_route('visiosoft.module.classifieds::edit_classified', [classified.id]) }}"
           class="btn preview-edit shadow-sm border">
            {{ trans('visiosoft.module.classifieds::field.edit') }}
        </a>
        <a href="{{ continueLink }}" class="btn preview-continue shadow-sm ml-4">
            {{ trans('visiosoft.module.classifieds::field.continue') }}
        </a>
    </div>

    {{ asset_add("styles.css", "visiosoft.module.classifieds::css/detail.css") }}
    {{ asset_add("styles.css", "visiosoft.module.classifieds::css/preview.css") }}

{% endblock %}
